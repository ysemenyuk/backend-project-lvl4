extends ../layouts/application.pug

block header
  = 'edit task'

block content
  form(action=route('patchTask', { id: task.id }) method='post')

    +input(task, 'name', errors)(type="text")

    input(name="_method" type="hidden" value="patch")

    .form-group
        label(for="data_description")= 'task description'
        textarea.form-control(id="data_description" name="data[description]" rows="3")= task.description
    
    .form-group
        label(for="data_statusId")= 'task statuses'
        select(id="data_statusId" name="data[statusId]" class=`form-control ${!errors.statusId ? '' : 'is-invalid'}`)
          option
          each status in statuses
            if status.id === task.statusId
              option(value=status.id selected) #{status.name}
            else
              option(value=status.id) #{status.name}
        if errors.statusId
          .form-control-feedback.invalid-feedback= errors.statusId.map(({ message }) => message).join('. ')

    .form-group
        label(for="data_executorId")= 'task executor'
        select.form-control(id="data_executorId" name="data[executorId]")
          option
          each executor in executors
            option(value=executor.id selected=executor.id === task.executorId) #{executor.fullName()}

    .form-group
      input(class='btn btn-primary' type='submit' value='submit')
